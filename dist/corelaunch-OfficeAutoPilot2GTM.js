!function(o){var t=jQuery||t;t.cookie.json=!0;var r,n,e="officeAutoPilot2GTM: uhoh... ",i={formSelector:"moonray_order_form form",cookieKey:"oap2gtmTrans"};(window.onpopstate=function(){var o,t=/\+/g,r=/([^&=]+)=?([^&]*)/g,e=function(o){return decodeURIComponent(o.replace(t," "))},i=window.location.search.substring(1);for(n={};o=r.exec(i);)n[e(o[1])]=e(o[2])}).call();var a=function(o){return t.each(o,function(o,t){t.price=Number(t.price.replace(/[^0-9\.]+/g,""))}),o},c=function(o){var r=0;return t.each(o,function(o,t){r+=t.price*t.quantity}),r};o.orderForm=function(n){t.isArray(n)||console.error(e,"products parameter must be an array"),r=n,t("div."+i.formSelector).submit(function(){o.setCookie()})},o.getStore=function(){return r},o.setCookie=function(){t.cookie(i.cookieKey,r,{expires:7,path:"/"})},o.send=function(){var o=t.cookie(i.cookieKey);void 0!==o&&(o=a(o),dataLayer.push({event:"trackTrans",transactionId:n.transaction_id||"r"+Date.now()+"-"+Math.floor(65536*(1+Math.random())).toString(16).substring(1),transactionCurrency:"USD",transactionProducts:o,transactionAffiliation:"",transactionTotal:c(o),transactionTax:"",transactionShipping:""}),t.removeCookie(i.cookieKey,{path:"/"}))}}("undefined"==typeof exports?this.officeAutoPilot2GTM={}:exports);