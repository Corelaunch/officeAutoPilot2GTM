!function(o){jQuery.cookie.json=!0;var r,e="officeAutoPilot2GTM: uhoh... ",n={formSelector:"moonray_order_form form",cookieKey:"oap2gtmTrans"};(window.onpopstate=function(){var o,e=/\+/g,n=/([^&=]+)=?([^&]*)/g,t=function(o){return decodeURIComponent(o.replace(e," "))},i=window.location.search.substring(1);for(r={};o=n.exec(i);)r[t(o[1])]=t(o[2])}).call();var t=function(o){return jQuery.each(o,function(o,r){r.price=Number(r.price.replace(/[^0-9\.]+/g,""))}),o},i=function(o){var r=0;return jQuery.each(o,function(o,e){r+=e.price*e.quantity}),r};o.orderForm=function(o){$.isArray(o)||console.error(e,"products parameter must be an array"),jQuery("div."+n.formSelector).submit(function(){jQuery.cookie(n.cookieKey,o,{expires:7})})},o.send=function(){var o=jQuery.cookie(n.cookieKey);void 0!==o&&(o=t(o),dataLayer.push({event:"trackTrans",transactionId:r.transaction_id,transactionCurrency:"USD",transactionProducts:o,transactionAffiliation:"",transactionTotal:i(o),transactionTax:"",transactionShipping:""}),jQuery.removeCookie(n.cookieKey))}}("undefined"==typeof exports?this.officeAutoPilot2GTM={}:exports);